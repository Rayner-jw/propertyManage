webpackJsonp([22],{0:function(e,t){},"51Er":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var r=function(e,t){var s={yyyy:e.getFullYear(),yy:(""+e.getFullYear()).slice(-2),M:e.getMonth()+1,MM:("0"+(e.getMonth()+1)).slice(-2),d:e.getDate(),dd:("0"+e.getDate()).slice(-2),H:e.getHours(),HH:("0"+e.getHours()).slice(-2),h:e.getHours()%12,hh:("0"+e.getHours()%12).slice(-2),m:e.getMinutes(),mm:("0"+e.getMinutes()).slice(-2),s:e.getSeconds(),ss:("0"+e.getSeconds()).slice(-2),w:["日","一","二","三","四","五","六"][e.getDay()]};return t.replace(/([a-z]+)/gi,function(e){return s[e]})}},8423:function(e,t){},"Cxr/":function(e,t){},I2Ym:function(e,t,s){"use strict";var r=s("51Er"),a={name:"homeHeaderNav",data:function(){return{uid:localStorage.uid,notify:[],message:[],account:"",formatDate:r.a}},created:function(){this.$http.get("http://localhost:3000/user/notify/notify?uid="+this.uid).then(function(e){this.notify=e.body.results,this.account=e.body.account},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Message({type:"error",message:t})}),this.$http.get("http://localhost:3000/user/notify/message?uid="+this.uid).then(function(e){this.message=e.body.results},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Message({type:"error",message:t})})},methods:{logOut:function(){this.$http.post("http://localhost:3000/logOut").then(function(e){location.href=e.body.url},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Message({type:"error",message:t})})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"homeHeaderNav"},[s("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"}},[s("el-badge",{staticClass:"icon",attrs:{value:e.message.length,hidden:!e.message.length}},[s("i",{staticClass:"my-icon my-icon-3"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("div",{staticClass:"dropdownBox"},[s("h4",[e._v(" "+e._s(0!=e.message.length?"您有"+e.message.length+"条未读消息":"暂无未读消息")+" ")]),e._v(" "),e._l(e.message,function(t){return 0!=e.message.length?[s("span",[e._v("["+e._s(e.formatDate(new Date(t.createAt),"yyyy-MM-dd HH:mm:ss"))+"] "),s("span",[e._v(e._s(t.content))])])]:e._e()}),e._v(" "),0!=e.message.length?s("a",{attrs:{href:"/user/receiveMsg"}},[e._v("查看全部")]):e._e()],2)])],1),e._v(" "),s("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"}},[s("el-badge",{staticClass:"icon",attrs:{value:e.notify.length,hidden:!e.notify.length}},[s("i",{staticClass:"my-icon my-icon-gonggao"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("div",{staticClass:"dropdownBox"},[s("h4",[e._v(" "+e._s(0!=e.notify.length?"您有"+e.notify.length+"条未读公告":"暂无未读公告")+" ")]),e._v(" "),e._l(e.notify,function(t){return 0!=e.notify.length?[s("span",[e._v("["+e._s(e.formatDate(new Date(t.createAt),"yyyy-MM-dd HH:mm:ss"))+"] "),s("span",[e._v(e._s(t.annocementContent))])])]:e._e()}),e._v(" "),0!=e.notify.length?s("a",{attrs:{href:"/user/annocementLog"}},[e._v("查看全部")]):e._e()],2)])],1),e._v(" "),s("el-dropdown",{staticClass:"icon_me",attrs:{trigger:"click",placement:"bottom"}},[s("el-badge",{staticClass:"icon"},[s("i",{staticClass:"my-icon my-icon-iconuser"})]),e._v(" "),s("el-dropdown-menu",{staticClass:"userBox",attrs:{slot:"dropdown"},slot:"dropdown"},[[s("li",[e._v(e._s("用户 "+e.account))]),e._v(" "),s("li",{staticClass:"line"}),e._v(" "),s("li",[s("a",{attrs:{href:"/user/basicInfo"}},[e._v("基本信息")])]),e._v(" "),s("li",[s("a",{attrs:{href:"/user/setting"}},[e._v("安全设置")])]),e._v(" "),s("li",{staticClass:"line"}),e._v(" "),s("li",{on:{click:e.logOut}},[e._v("退出")])]],2)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(a,o,!1,function(e){s("8423")},null,null);t.a=i.exports},Nr4M:function(e,t){},bKyE:function(e,t,s){"use strict";var r=s("zL8q"),a={name:"menuNav",data:function(){return{uid:localStorage.uid,menus:[]}},created:function(){void 0===this.uid&&(Object(r.Message)({type:"warning",message:"登录信息已失效，请重新登录"}),setTimeOut(function(){location.href="/"},2e3)),this.$http.get("http://localhost:3000/menus?uid="+this.uid).then(function(e){this.menus=e.body},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(r.Message)({type:"error",message:t})})},methods:{}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menuNav"},[s("el-menu",{staticClass:"menu",attrs:{"unique-opened":!0,"background-color":"#222d32","text-color":"#fff","active-text-color":"#ffd04b"}},e._l(e.menus,function(t,r){return s("el-submenu",{key:r,attrs:{index:r+""}},[s("template",{slot:"title"},[s("i",{class:t.icon}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.menuName))])]),e._v(" "),e._l(t.childs,function(t,a){return s("el-menu-item",{key:a,attrs:{index:r+"-"+a}},[s("a",{attrs:{href:t.url}},[e._v(e._s(t.name))])])})],2)}))],1)},staticRenderFns:[]};var i=s("VU/8")(a,o,!1,function(e){s("j/pX")},null,null);t.a=i.exports},cF5e:function(e,t){},"eGO+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("7+uW"),a=s("bKyE"),o=s("I2Ym"),i=s("mvHQ"),n=s.n(i),l=s("zL8q"),u={name:"basicInfo",data:function(){return{uid:localStorage.uid,isread:!0,readForm:{},ruleForm:{},mailForm:{},rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{pattern:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,message:"身份证号码格式不正确",trigger:"blur"}],userPhone:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"手机号格式不正确"}]},mailRules:{userMail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],verCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:this.validateMailCode,trigger:"blur"}]},dialogTableVisible:!1}},created:function(){this.$http.get("http://localhost:3000/user/userBasic?uid="+this.uid).then(function(e){this.ruleForm=e.body,this.readForm=JSON.parse(n()(this.ruleForm))},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(l.Message)({type:"error",message:t})})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return console.log("error submit!!"),!1;"ruleForm"==e&&t.makeSure(),"mailForm"==e&&t.makeSureMail()})},makeSure:function(){var e=JSON.parse(n()(this.ruleForm));e.uid=this.uid,this.$http.post("http://localhost:3000/user/userBasic",e).then(function(e){Object(l.Message)({type:"success",message:e.body.msg}),this.readForm=JSON.parse(n()(this.ruleForm)),this.isread=!0},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(l.Message)({type:"error",message:t})})},makeSureMail:function(){var e=JSON.parse(n()(this.mailForm));e.uid=this.uid,this.$http.post("http://localhost:3000/user/userBasicInfo",e).then(function(e){Object(l.Message)({type:"success",message:e.body.msg}),this.ruleForm.userMail=this.mailForm.userMail,this.dialogTableVisible=!1,this.mailForm={}},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(l.Message)({type:"error",message:t})})},getEmailCode:function(e){if(void 0===e&&(e=""),0==(e=e.trim()).length)return Object(l.Message)({type:"warning",message:"请填写获取验证码邮箱"});this.$http.post("http://localhost:3000/mailCode",{email:e}).then(function(e){Object(l.Message)({type:"success",message:"请登录邮箱获取验证码"})},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(l.Message)({type:"error",message:t})})},validateMailCode:function(e,t,s){var r=t.trim();this.$http.get("http://localhost:3000/mailCode?mailCode="+r).then(function(e){s()},function(e){if(401!=e.status){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(l.Message)({type:"error",message:t})}else s(new Error("验证码错误"))})}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"basicInfo"},[s("span",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),s("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"账号名"}},[s("span",[e._v(e._s(e.readForm.account))])]),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[e.isread?s("span",[e._v(e._s(e.readForm.userName))]):s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[e.isread?s("span",[e._v(e._s(e.readForm.idCard))]):s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.idCard,callback:function(t){e.$set(e.ruleForm,"idCard",t)},expression:"ruleForm.idCard"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号",prop:"userPhone"}},[e.isread?s("span",[e._v(e._s(e.readForm.userPhone))]):s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.userPhone,callback:function(t){e.$set(e.ruleForm,"userPhone",t)},expression:"ruleForm.userPhone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱"}},[s("span",[e._v(e._s(e.readForm.userMail))]),e._v(" "),s("el-button",{attrs:{type:"text",disabled:!e.isread},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("换绑邮箱")])],1),e._v(" "),s("el-form-item",{attrs:{label:""}},[e.isread?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.isread=!1}}},[e._v("修改")]):s("el-button-group",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.isread=!0}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"换绑邮箱",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("el-form",{ref:"mailForm",attrs:{model:e.mailForm,rules:e.mailRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"新邮箱",prop:"userMail"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.mailForm.userMail,callback:function(t){e.$set(e.mailForm,"userMail",t)},expression:"mailForm.userMail"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码",prop:"verCode"}},[s("el-input",{staticStyle:{width:"calc(100% - 150px)","margin-right":"20px"},attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.mailForm.verCode,callback:function(t){e.$set(e.mailForm,"verCode",t)},expression:"mailForm.verCode"}}),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getEmailCode(e.mailForm.userMail)}}},[e._v("获取验证码")])],1),e._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("mailForm")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(u,m,!1,function(e){s("Cxr/")},null,null).exports,d={name:"App",components:{MenuNav:a.a,HomeHeaderNav:o.a,BasicInfo:c}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"lf"},[t("MenuNav")],1),this._v(" "),t("div",{staticClass:"lr"},[t("HomeHeaderNav"),this._v(" "),t("BasicInfo")],1)])},staticRenderFns:[]};var g=s("VU/8")(d,f,!1,function(e){s("Nr4M")},null,null).exports,p=s("8+8L");s("tvR6"),s("cF5e");r.default.use(p.a),r.default.use(l.Form),r.default.use(l.FormItem),r.default.use(l.Input),r.default.use(l.Button),r.default.use(l.ButtonGroup),r.default.use(l.Menu),r.default.use(l.Submenu),r.default.use(l.MenuItem),r.default.use(l.MenuItemGroup),r.default.use(l.Badge),r.default.use(l.Dropdown),r.default.use(l.DropdownMenu),r.default.use(l.DropdownItem),r.default.use(l.Dialog),r.default.config.productionTip=!1,new r.default({el:"#app",template:"<App/>",components:{App:g}})},"j/pX":function(e,t){},tvR6:function(e,t){}},["eGO+"]);
//# sourceMappingURL=basicInfo.4f2752195ecc59e6017f.js.map