webpackJsonp([29],{0:function(e,t){},"L+g4":function(e,t){},UgZ6:function(e,t){},btFN:function(e,t){},cF5e:function(e,t){},iwaa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),a=r("zL8q"),l={name:"forgotPwd",data:function(){return{ruleForm:{},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[a-zA-Z][a-zA-Z0-9_-]{3,15}$/,message:"账号必须以字母开头，由4到16位（字母，数字，下划线，减号）组成",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?=.*[0-9])((?=.*[a-zA-Z])[0-9a-zA-Z]+|(?=.*[!.#$%^&*])[0-9!.#$%^&*]+)$/,message:"密码必须6位以上且由字母/数字/符号任意两者以上组成",trigger:"blur"}],surePwd:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validatePwd,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],verCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:this.validateMailCode,trigger:"blur"}]}}},methods:{validatePwd:function(e,t,r){""==t?r(new Error("请输入确认密码")):t!=this.ruleForm.pwd?r(new Error("两次输入密码不一致!")):r()},validateMailCode:function(e,t,r){var o=t.trim();this.$http.get("http://localhost:3000/mailCode?mailCode="+o).then(function(e){r()},function(e){if(401!=e.status){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(a.Message)({type:"error",message:t})}else r(new Error("验证码错误"))})},getEmailCode:function(e){if(void 0===e&&(e=""),0==(e=e.trim()).length)return Object(a.Message)({type:"warning",message:"请填写获取验证码邮箱"});this.$http.post("http://localhost:3000/mailCode",{email:e}).then(function(e){Object(a.Message)({type:"success",message:"请登录邮箱获取验证码"})},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(a.Message)({type:"error",message:t})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.makeSure()})},makeSure:function(){this.$http.put("http://localhost:3000/lookfor",this.ruleForm).then(function(e){void 0===e.body.url?Object(a.Message)({type:"warning",message:e.body.msg}):(Object(a.Message)({type:"success",message:e.body.msg}),location.href=e.body.url)},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(a.Message)({type:"error",message:t})})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"forgotPwd"},[r("el-form",{ref:"ruleForm",staticClass:"forgotPwdForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"账号名",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入要找回的账号名","auto-complete":"off"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"绑定邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入绑定账号的邮箱","auto-complete":"off"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"verCode"}},[r("el-input",{staticStyle:{width:"calc(100% - 150px)","margin-right":"20px"},attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.ruleForm.verCode,callback:function(t){e.$set(e.ruleForm,"verCode",t)},expression:"ruleForm.verCode"}}),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getEmailCode(e.ruleForm.email)}}},[e._v("获取验证码")])],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"pwd"}},[r("el-input",{attrs:{placeholder:"请输入新的密码",type:"password","auto-complete":"off"},model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"surePwd"}},[r("el-input",{attrs:{placeholder:"确认密码",type:"password","auto-complete":"off"},model:{value:e.ruleForm.surePwd,callback:function(t){e.$set(e.ruleForm,"surePwd",t)},expression:"ruleForm.surePwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var i={name:"App",components:{ForgotPwd:r("VU/8")(l,s,!1,function(e){r("UgZ6")},null,null).exports,HeaderNav:r("k1aN").a}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("HeaderNav",[t("span",{attrs:{slot:"navTitle"},slot:"navTitle"},[this._v("找回密码")])]),this._v(" "),t("ForgotPwd")],1)},staticRenderFns:[]};var u=r("VU/8")(i,n,!1,function(e){r("L+g4")},null,null).exports,c=r("8+8L");r("tvR6"),r("cF5e");o.default.use(c.a),o.default.use(a.Form),o.default.use(a.FormItem),o.default.use(a.Input),o.default.use(a.Button),o.default.config.productionTip=!1,new o.default({el:"#app",template:"<App/>",components:{App:u}})},k1aN:function(e,t,r){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"headerNav"},[this._t("navTitle")],2)},staticRenderFns:[]};var a=r("VU/8")({name:"headerNav",data:function(){return{}},methods:{}},o,!1,function(e){r("btFN")},null,null);t.a=a.exports},tvR6:function(e,t){}},["iwaa"]);
//# sourceMappingURL=forgotPwd.0cdbadf8c9cf29d94306.js.map