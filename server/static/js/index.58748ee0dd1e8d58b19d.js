webpackJsonp([28],{"+toU":function(e,t){},0:function(e,t){},U67u:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),n=r("k1aN"),s=r("zL8q"),i={name:"login",data:function(){return{ruleForm:{},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?=.*[0-9])((?=.*[a-zA-Z])[0-9a-zA-Z]+|(?=.*[!.#$%^&*])[0-9!.#$%^&*]+)$/,message:"密码必须6位以上且由字母/数字/符号任意两者以上组成",trigger:"blur"}],verCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:this.validateVerCode,trigger:"blur"}]},getVerCode:null}},created:function(){this.freshVerCode()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.login()})},login:function(){this.$http.post("http://localhost:3000/login",this.ruleForm).then(function(e){Object(s.Message)({type:"success",message:e.body.msg}),localStorage.uid=e.body.id,location.href=e.body.url},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(s.Message)({type:"error",message:t})})},freshVerCode:function(){this.$http.get("http://localhost:3000/getVerCode").then(function(e){console.log(e),this.getVerCode=e.body.img},function(e){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(s.Message)({type:"error",message:t})})},validateVerCode:function(e,t,r){var o=t.trim();this.$http.post("http://localhost:3000/getVerCode",{verCode:o}).then(function(e){r()},function(e){if(401!=e.status){if(void 0===e.body.msg)var t="服务器正在维护，造成不便，请理解！";else t=e.body.msg;Object(s.Message)({type:"error",message:t})}else r(new Error("验证码密码"))})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loginArea"},[r("el-form",{ref:"ruleForm",staticClass:"loginForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("div",{staticClass:"title"},[e._v("JW propertySys")]),e._v(" "),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{placeholder:"账号","prefix-icon":"my-icon-denglu1","auto-complete":"off"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"pwd"}},[r("el-input",{attrs:{placeholder:"密码","prefix-icon":"my-icon-denglu",type:"password","auto-complete":"off"},on:{onkeyup:function(t){e.submitForm("ruleForm")}},model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"verCode"}},[r("el-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"图片验证码"},on:{onkeyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.verCode,callback:function(t){e.$set(e.ruleForm,"verCode",t)},expression:"ruleForm.verCode"}}),e._v(" "),r("div",{staticStyle:{display:"inline-block",width:"150px",height:"40px","vertical-align":"middle"},domProps:{innerHTML:e._s(e.getVerCode)},on:{click:e.freshVerCode}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"loginBtn",attrs:{icon:"my-icon-icon-right",type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")]),e._v(" "),r("div",{staticClass:"other"},[r("span",[r("a",{attrs:{href:"/user/register"}},[e._v("用户注册")])]),e._v(" "),r("span",[r("a",{attrs:{href:"/user/forgotPwd"}},[e._v("忘记密码")])])])],1)],1)],1)},staticRenderFns:[]};var l=r("VU/8")(i,a,!1,function(e){r("+toU")},null,null).exports,u={name:"app",components:{HeaderNav:n.a,Login:l}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("HeaderNav",[t("span",{staticClass:"loginTitle",attrs:{slot:"navTitle"},slot:"navTitle"},[this._v("jw 物业管理系统")])]),this._v(" "),t("login")],1)},staticRenderFns:[]};var d=r("VU/8")(u,c,!1,function(e){r("nBZX")},null,null).exports,m=r("8+8L");r("tvR6"),r("cF5e");o.default.use(m.a),o.default.use(s.Form),o.default.use(s.FormItem),o.default.use(s.Input),o.default.use(s.Button),o.default.config.productionTip=!1,new o.default({el:"#app",template:"<App/>",components:{App:d}})},btFN:function(e,t){},cF5e:function(e,t){},k1aN:function(e,t,r){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"headerNav"},[this._t("navTitle")],2)},staticRenderFns:[]};var n=r("VU/8")({name:"headerNav",data:function(){return{}},methods:{}},o,!1,function(e){r("btFN")},null,null);t.a=n.exports},nBZX:function(e,t){},tvR6:function(e,t){}},["U67u"]);
//# sourceMappingURL=index.58748ee0dd1e8d58b19d.js.map